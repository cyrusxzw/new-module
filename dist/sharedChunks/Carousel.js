"use strict";var e=require("./tslib.es6.js"),t=require("react"),a=require("classnames"),s=require("./get.js"),i=require("react-slick");require("./AddToCartContext.js"),require("./GoogleMapsContext.js"),require("./ErrorContext.js"),require("./LoadMoreContext.js"),require("./NavBarThemeContext.js"),require("./NotificationContext.js"),require("./ProductDetailContext.js");var l=require("./ThemeContext.js");require("./VariantSelectContext.js");var n=require("./viewports.js");require("./environment.js");var r=require("./useWindowHasResized.js"),d=require("./viewport.js"),o=require("./ConditionalWrapper.js"),u=require("./Hyperlink.js"),c=require("./Loading.js"),m=require("./Transition.js"),f=require("./SectionHeading.js"),h=require("./Carousel.module.js"),v=require("./Button.js"),y=require("./Icon.js"),p=require("./Heading.js"),g=require("./Image.js");function E(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var S=E(t),N=E(a),x=E(i),$=function(e){var t,a,s=e.cta,i=e.description,n=e.eyebrow,r=e.heading,d=e.theme,o=l.useThemeContext(d,"dark"),c=!!(null==s?void 0:s.text),m=N.default(h.styles.base,h.styles[o]),v=N.default(h.styles.heading,((t={})[h.styles.offsetHeading]=!!i||c,t));return S.default.createElement("div",{className:m},S.default.createElement(f.SectionHeading,{className:v,eyebrow:n,hasSerifFontHeading:!0,heading:r,isFlush:!0,theme:o}),(!!i||c)&&S.default.createElement("div",{className:h.styles.content},i&&S.default.createElement("div",{className:N.default(h.styles.description,(a={},a[h.styles.hasCta]=c,a),h.styles[o])},i),c&&S.default.createElement("div",{className:h.styles.ctaWrapper},S.default.createElement(u.Hyperlink,{style:s.style,theme:o,title:s.title,url:s.url},s.text))))},C=function(e){var t,a=e.isActive,s=void 0===a||a,i=e.onClick,l=e.theme,n=void 0===l?"dark":l;return S.default.createElement(v.Button,{className:N.default(h.styles$1.base,(t={},t[h.styles$1.hidden]=!s,t)),isInline:!0,onClick:i,theme:n,title:"next slide"},S.default.createElement(y.Icon,{height:16,name:"chevron",theme:n,width:16}))},q=function(e){var t,a=e.dots,s=void 0===a?[]:a,i=e.hasFlushPagination,l=void 0!==i&&i,n=e.progressIndex,r=void 0===n?0:n,d=e.theme,o=void 0===d?"dark":d;if(!s.length)return null;var u=s.length,c=100/u+"%",m=100/u*r+"%",f=N.default(h.styles$2.list,((t={})[h.styles$2.flush]=l,t),h.styles$2[o]);return S.default.createElement("div",{className:h.styles$2.base,"data-testid":"data-testid-Carousel-Pagination"},S.default.createElement("div",{className:f},S.default.createElement("div",{className:h.styles$2.bar,style:{width:c,left:m}})))},j=function(e){var t,a=e.isActive,s=void 0===a||a,i=e.onClick,l=e.theme,n=void 0===l?"dark":l;return S.default.createElement(v.Button,{className:N.default(h.styles$3.base,(t={},t[h.styles$3.hidden]=!s,t)),isInline:!0,onClick:i,theme:n,title:"previous slide"},S.default.createElement(y.Icon,{height:16,name:"chevron",theme:n,width:16}))},w=function(t){var a,s=t.description,i=t.heading,l=t.id,n=t.image,r=t.isFullWidthSlide,d=void 0!==r&&r,o=t.theme,u=void 0===o?"dark":o;return S.default.createElement(S.default.Fragment,null,(i||s)&&S.default.createElement("div",{className:N.default(h.styles$4.information,h.styles$4[u]),id:l},i&&S.default.createElement(p.Heading,{className:N.default(h.styles$4.heading,h.styles$4[u]),level:"5",size:"xXSmall"},i),s&&S.default.createElement("div",{className:N.default(h.styles$4.description,h.styles$4[u])},s)),S.default.createElement("div",{className:h.styles$4.imageContainer},S.default.createElement(g.Image,e.__assign({className:N.default(h.styles$4.image,(a={},a[h.styles$4.fullWidthSlide]=d,a)),theme:u},n))))};exports.Carousel=function(a){var i,f,v,y=a.autoplaySpeed,p=void 0===y?3e3:y,g=a.className,E=a.hasAutoplay,k=void 0!==E&&E,b=a.hasFlushPagination,A=void 0!==b&&b,I=a.hasFullWidthSlides,W=void 0!==I&&I,P=a.hasShowCaption,T=void 0!==P&&P,B=a.hasSlideCounter,F=void 0!==B&&B,H=a.id,_=a.initialSlideIndex,L=void 0===_?0:_,R=a.introduction,V=a.isCompact,z=void 0!==V&&V,K=a.slides,M=void 0===K?[]:K,O=a.slideRefs,D=void 0===O?[]:O,G=a.theme,X=M.length,J=l.useThemeContext(G,"dark"),Q=t.useState(0),U=Q[0],Y=Q[1],Z=t.useState(!0),ee=Z[0],te=Z[1],ae=t.useState(!0),se=ae[0],ie=ae[1],le=t.useState(W),ne=le[0],re=le[1],de=t.useState(s.get_1(M[L],"caption","")),oe=de[0],ue=de[1],ce=t.useState(L+1+" / "+X),me=ce[0],fe=ce[1];r.useWindowHasResized();var he=0;if(he=W||d.isViewport("xs to sm only")?1:d.isViewport("md only")?2:d.isViewport("lg to xl only")?3:4,0===X)return null;var ve=N.default(h.styles$5.base,((i={})[h.styles$5.fullWidthSlides]=W,i),h.styles$5[J],g),ye=function(e){var t=e.autoplaySpeed,a=e.className,s=e.hasAutoplay,i=e.hasFlushPagination,l=e.hasFullWidthSlides,r=e.initialSlideIndex,d=e.isNextButtonActive,o=e.isPreviousButtonActive,u=e.Pagination,c=e.NextButton,m=e.PreviousButton,f=e.progressIndex,h=e.theme;return{autoplay:s,autoplaySpeed:t,appendDots:function(e){return S.default.createElement(u,{dots:e,hasFlushPagination:i,progressIndex:f,theme:h})},centerMode:!1,className:a,customPaging:function(){return S.default.createElement("div",null)},dots:!0,infinite:l,initialSlide:r,nextArrow:S.default.createElement(c,{isActive:d,theme:h}),prevArrow:S.default.createElement(m,{isActive:o,theme:h}),responsive:[{breakpoint:n.BREAKPOINTS.get("sm").maxWidth,settings:{slidesToShow:1}},{breakpoint:n.BREAKPOINTS.get("md").maxWidth,settings:{slidesToShow:l?1:2}},{breakpoint:n.BREAKPOINTS.get("x2l").minWidth,settings:{slidesToShow:l?1:3}}],slidesToScroll:1,slidesToShow:l?1:4,speed:500,swipeToSlide:!0}}({autoplaySpeed:p,className:h.styles$5.carousel,hasAutoplay:k,hasFlushPagination:A,hasFullWidthSlides:W,initialSlideIndex:L,isNextButtonActive:se,isPreviousButtonActive:ne,Pagination:q,NextButton:C,PreviousButton:j,progressIndex:U,theme:J}),pe=R&&!d.isViewport("xs to md only")&&!W,ge=pe?X+1:X;return S.default.createElement("div",{className:ve,id:H},!pe&&R&&S.default.createElement("aside",{className:h.styles$5.mobileCarouselIntroductionWrapper},S.default.createElement($,{cta:R.cta,description:R.description,eyebrow:R.eyebrow,heading:R.heading,theme:J})),S.default.createElement(x.default,e.__assign({},ye,{afterChange:function(e){te(!0),ue(M[e].caption),fe(e+1+" of "+X)},beforeChange:function(e,t){if(te(!1),Y(t),!W){var a=ge-t;re(0!==t),ie(a!==he)}}}),pe&&S.default.createElement($,{cta:R.cta,description:R.description,eyebrow:R.eyebrow,heading:R.heading,theme:J}),M.map((function(t,a){var s=t.url,i=e.__rest(t,["url"]);return S.default.createElement("div",{className:h.styles$5.slideWrapper,key:a,ref:D[a]},i.isLoading?S.default.createElement(c.Loading,{className:h.styles$5.loading,isLoading:!0,shouldFillSpace:!0}):S.default.createElement(o.ConditionalWrapper,{alternateWrapper:function(e){return S.default.createElement("div",{className:h.styles$5.item},e)},condition:!!s,wrapper:function(e){return S.default.createElement(u.Hyperlink,{className:N.default(h.styles$5.item,h.styles$5.link),theme:J,title:"Link to "+i.heading,url:s},e)}},S.default.createElement(w,e.__assign({},i,{isFullWidthSlide:W,theme:J}))))}))),(T||F)&&S.default.createElement("footer",{className:N.default(h.styles$5.footer,(f={},f[h.styles$5.flush]=A,f))},F&&!z&&S.default.createElement("div",{className:h.styles$5.slideCounter},ge>1&&me),T&&S.default.createElement(m.Transition,{isActive:ee&&!!oe,type:"fade"},S.default.createElement("div",{className:N.default(h.styles$5.caption,(v={},v[h.styles$5.onlyChild]=!F||z,v))},oe))))};

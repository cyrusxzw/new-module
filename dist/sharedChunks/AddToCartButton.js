"use strict";var t=require("react"),n=require("classnames"),e=require("./AddToCartContext.js");require("./GoogleMapsContext.js"),require("./LoadMoreContext.js"),require("./NavBarThemeContext.js"),require("./NotificationContext.js"),require("./ProductDetailContext.js"),require("./ThemeContext.js");var a=require("./VariantSelectContext.js"),o=require("./Hyperlink.js");require("./viewports.js");var r=require("./Button.js"),i=require("./Loading.js"),l=require("./style-inject.es.js");function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var d=s(t),u=s(n),m="AddToCartButton-module_base__37_2I",c="AddToCartButton-module_fullWidth__rn5PM",p="AddToCartButton-module_loading__vyoP4",b="AddToCartButton-module_showSuccessMessage__3XSD_",_="AddToCartButton-module_label__24I08",f="AddToCartButton-module_hideLabel__1UwVn";l.styleInject(":root {\n  /* Base colours */\n\n  /* UI colours light theme */\n\n  /* UI colours dark theme */\n\n  /* Background colours */\n\n  /* System colours */\n\n  /* Secondary Message background colour */\n}\n/** https://github.com/postcss/postcss-custom-properties/issues/24\n :root {\n  --breakpoint-xs-min: 0;\n  --breakpoint-xs-max: 320px;\n  --breakpoint-sm-min: 321px;\n  --breakpoint-sm-max: 639px;\n  --breakpoint-md-min: 640px;\n  --breakpoint-md-max: 1024px;\n  --breakpoint-lg-min: 1025px;\n  --breakpoint-lg-max: 1219px;\n  --breakpoint-xl-min: 1220px;\n  --breakpoint-xl-max: 1599px;\n  --breakpoint-x2l-min: 1600px;\n  --breakpoint-x2l-max: 1919px;\n  --breakpoint-x3l-min: 1920px;\n  --breakpoint-x3l-max: 2399px;\n  --breakpoint-x4l-min: 2400px;\n} */\n/* Dark theme UI elements */\n/* Light theme UI elements */\n.AddToCartButton-module_base__37_2I {\n  width: -webkit-min-content;\n  width: -moz-min-content;\n  width: min-content;\n  min-width: auto;\n  max-width: 100%;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  padding: 20px 15px 20px;\n  font-size: 14px;\n  text-align: center;\n}\n@media (min-width: 1025px) {\n.AddToCartButton-module_base__37_2I {\n    max-width: 470px\n}\n  }\n.AddToCartButton-module_fullWidth__rn5PM {\n  width: 100%;\n}\n.AddToCartButton-module_loading__vyoP4 {\n  position: absolute;\n  top: calc(50% - 3.5px);\n  left: 0;\n}\n.AddToCartButton-module_showSuccessMessage__3XSD_ span {\n    -webkit-animation: AddToCartButton-module_slide-up__3W-bU 2000ms cubic-bezier(0.645, 0.045, 0.355, 1) forwards;\n            animation: AddToCartButton-module_slide-up__3W-bU 2000ms cubic-bezier(0.645, 0.045, 0.355, 1) forwards;\n  }\n.AddToCartButton-module_label__24I08 {\n  display: block;\n  overflow: hidden;\n  height: 16px;\n  line-height: 1;\n  opacity: 1;\n  -webkit-transition: opacity 400ms cubic-bezier(0.645, 0.045, 0.355, 1);\n  transition: opacity 400ms cubic-bezier(0.645, 0.045, 0.355, 1);\n  vertical-align: middle;\n}\n.AddToCartButton-module_label__24I08 span {\n    display: block;\n    overflow: hidden;\n    height: 18px;\n    margin-right: auto;\n    margin-left: auto;\n    line-height: 1;\n    text-overflow: ellipsis;\n    -webkit-transform: translateY(-18px);\n            transform: translateY(-18px);\n    -webkit-transition: all 300ms cubic-bezier(0.645, 0.045, 0.355, 1);\n    transition: all 300ms cubic-bezier(0.645, 0.045, 0.355, 1);\n    vertical-align: middle;\n    white-space: nowrap;\n  }\n.AddToCartButton-module_hideLabel__1UwVn {\n  opacity: 0;\n}\n@-webkit-keyframes AddToCartButton-module_slide-up__3W-bU {\n  0% {\n    -webkit-transform: translateY(0);\n            transform: translateY(0);\n  }\n\n  80% {\n    -webkit-transform: translateY(0);\n            transform: translateY(0);\n  }\n\n  100% {\n    -webkit-transform: translateY(-18px);\n            transform: translateY(-18px);\n  }\n}\n@keyframes AddToCartButton-module_slide-up__3W-bU {\n  0% {\n    -webkit-transform: translateY(0);\n            transform: translateY(0);\n  }\n\n  80% {\n    -webkit-transform: translateY(0);\n            transform: translateY(0);\n  }\n\n  100% {\n    -webkit-transform: translateY(-18px);\n            transform: translateY(-18px);\n  }\n}\n");exports.AddToCartButton=function(n){var l,s,x,k,h,C=n.className,v=n.copy,T=n.dataTestRef,w=void 0===T?"ADD_TO_CART":T,g=n.isEnabled,A=void 0===g||g,B=n.isFullWidth,y=void 0===B||B,j=n.theme,S=void 0===j?"dark":j,I=e.useAddToCartContext(),q=a.useVariantSelectContext().selectedVariant,N=I.errorMessage,E=I.hasError,U=I.isLoading,Y=I.isUpdateSuccessful,L=!U&&Y,z=function(n){var e=t.useState(!1),a=e[0],o=e[1],r=t.useRef(null);return t.useEffect((function(){return n&&(o(!0),r.current=setTimeout((function(){o(!1)}),2500)),function(){clearTimeout(r.current)}}),[n]),a}(L),M=null==v?void 0:v.updateNotification;if(!q)return null;var D=q.alternateAction,W=q.isInStock,O=q.isSellable,P=q.price,R=q.sku,V=(null==v?void 0:v.cartAction)+" â€” "+P,G=u.default(m,((l={})[c]=y,l),C);if((null==D?void 0:D.url)&&(null==D?void 0:D.label))return d.default.createElement(o.Hyperlink,{className:G,dataTestRef:w,isAlternate:!0,style:o.INTERNAL_NO_ICON_BUTTON_LINK,theme:S,title:null==D?void 0:D.label,url:null==D?void 0:D.url},null==D?void 0:D.label);E&&console.error("Add To Cart button updateError: ",N);var H=!U&&!!P&&!!R&&W&&!!R&&A&&!E&&!z&&O,X=u.default(_,((s={})[f]=U,s),((x={})[b]=L,x));return d.default.createElement(r.Button,{className:G,dataTestRef:w,isAlternate:!0,isEnabled:H,onClick:function(){var t=I.actionTypes,n=I.dispatch;(0,I.onClick)(R,n,t)},theme:S,title:W?V:null===(k=null==v?void 0:v.outOfStock)||void 0===k?void 0:k.title},U&&d.default.createElement(i.Loading,{className:p,"data-test-ref":w+"_UPDATING",isLoading:!0,theme:"dark"===S?"light":"dark"}),d.default.createElement("span",{className:X,"data-test-ref":L?w+"_SUCCESS":void 0},L?d.default.createElement("span",null,M):d.default.createElement("span",null," "),d.default.createElement("span",null,W?V:null===(h=null==v?void 0:v.outOfStock)||void 0===h?void 0:h.label)))};
